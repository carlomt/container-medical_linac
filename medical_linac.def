Bootstrap: docker
From: carlomt/geant4:11.2.0-almalinux9

%post
	mkdir -p /workspace
	curl https://gitlab.cern.ch/geant4/geant4/-/archive/geant4-`/opt/geant4/bin/geant4-config --version | awk -F '.' '{print $1"."$2}'`-release/geant4-master.tar.gz?path=examples/advanced/medical_linac \
	--output /workspace/medical_linac.tar.gz && \
	mkdir -p /workspace/source
	tar xf /workspace/medical_linac.tar.gz --strip-components 4 -C /workspace/source && \
	mkdir -p /workspace/build && \
	cd /workspace/ && \
	cmake \
	-G Ninja \
	/workspace/source && \
	ninja && \
	echo /workspace/medical_linac > /usr/local/bin/run && \
	chmod +x /usr/local/bin/run
	
%environment
	
	
%runscript

